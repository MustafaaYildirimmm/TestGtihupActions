name: Deploy to FTP

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2  # Repoyu çek

    - name: Setup .NET
      uses: actions/setup-dotnet@v2  # .NET runtime'ını kur

    - name: Build the project
      run: dotnet build --configuration Release  # Proje dosyalarını derle

    - name: Publish the project
      run: dotnet publish --configuration Release --output ./publish  # Proje dosyalarını yayınla

    - name: Deploy via FTP
      uses: wvbe/ftp-deploy-action@v2  # FTP'ye yayın yapmak için bir Action kullan

      with:
        server: ${{ secrets.FTP_SERVER }}  # FTP sunucu adresi
        username: ${{ secrets.FTP_USERNAME }}  # FTP kullanıcı adı
        password: ${{ secrets.FTP_PASSWORD }}  # FTP parola
        local-dir: ./publish  # Yayınlanmış dosyaların bulunduğu klasör
        remote-dir: /TestApiForActions  # Uzak sunucudaki hedef dizin
